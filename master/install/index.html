



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Maesh Documentation">
      
      
      
        <meta name="author" content="containo.us">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/img/maesh-logo.svg">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.2">
    
    
      
        <title>Installation - Maesh</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.30686662.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="">
      
    
    
      <script src="../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../assets/styles/extra.css">
    
      <link rel="stylesheet" href="../assets/styles/atom-one-light.css">
    
    
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-W6HPV6C');</script>
<!-- End Google Tag Manager -->
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="white" data-md-color-accent="#9d0eb0">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#installation" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="Maesh" class="md-header-nav__button md-logo">
          
            <img src="../assets/img/maesh-logo.svg" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Maesh
            </span>
            <span class="md-header-nav__topic">
              
                Installation
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/containous/maesh/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href=".." title="Maesh" class="md-nav__button md-logo">
      
        <img src="../assets/img/maesh-logo.svg" width="48" height="48">
      
    </a>
    Maesh
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/containous/maesh/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Welcome" class="md-nav__link">
      Welcome
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../quickstart/" title="Quickstart" class="md-nav__link">
      Quickstart
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Installation
      </label>
    
    <a href="./" title="Installation" class="md-nav__link md-nav__link--active">
      Installation
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#install-from-source" class="md-nav__link">
    Install from source
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deploy-helm-chart" class="md-nav__link">
    Deploy Helm Chart
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kubedns-support" class="md-nav__link">
    KubeDNS support
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-cluster-domain" class="md-nav__link">
    Custom cluster domain
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#access-control-list" class="md-nav__link">
    Access Control List
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#smi-mode-deprecated" class="md-nav__link">
    SMI Mode (Deprecated)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#platform-recommendations" class="md-nav__link">
    Platform recommendations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verify-your-installation" class="md-nav__link">
    Verify your installation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    Usage
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../configuration/" title="Configuration" class="md-nav__link">
      Configuration
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../examples/" title="Examples" class="md-nav__link">
      Examples
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../api/" title="API" class="md-nav__link">
      API
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Contributing
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Contributing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../contributing/thank-you/" title="Thank You!" class="md-nav__link">
      Thank You!
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../contributing/submitting-issues/" title="Submitting Issues" class="md-nav__link">
      Submitting Issues
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../contributing/submitting-pull-requests/" title="Submitting Pull Requests" class="md-nav__link">
      Submitting Pull Requests
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../contributing/building-testing/" title="Building and Testing" class="md-nav__link">
      Building and Testing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../contributing/documentation/" title="Documentation" class="md-nav__link">
      Documentation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../contributing/maintainers/" title="Maintainers" class="md-nav__link">
      Maintainers
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#install-from-source" class="md-nav__link">
    Install from source
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deploy-helm-chart" class="md-nav__link">
    Deploy Helm Chart
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kubedns-support" class="md-nav__link">
    KubeDNS support
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-cluster-domain" class="md-nav__link">
    Custom cluster domain
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#access-control-list" class="md-nav__link">
    Access Control List
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#smi-mode-deprecated" class="md-nav__link">
    SMI Mode (Deprecated)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#platform-recommendations" class="md-nav__link">
    Platform recommendations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verify-your-installation" class="md-nav__link">
    Verify your installation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    Usage
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/containous/maesh/edit/master/docs/content/install.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="installation">Installation<a class="headerlink" href="#installation" title="Permanent link">&para;</a></h1>
<p>To install Maesh, the installation method is quite simple:</p>
<pre class="highlight"><code class="language-bash">helm repo add maesh https://containous.github.io/maesh/charts
helm repo update</code></pre>

<p>Install Maesh Helm Chart:</p>
<pre class="highlight"><code class="language-bash">helm install maesh maesh/maesh</code></pre>

<h2 id="install-from-source">Install from source<a class="headerlink" href="#install-from-source" title="Permanent link">&para;</a></h2>
<div class="admonition note supported installations">
<p class="admonition-title">Note</p>
<p>Please be aware that the supported installation method is via Helm, using official releases.
If you want to build/install/run Maesh from source, we may not be able to provide support.
Installing from source is intended for development/contributing.</p>
</div>
<p>To build the image locally, run:</p>
<pre class="highlight"><code class="language-shell">make</code></pre>

<p>You will then be able to use the tagged image as your image in your <code>values.yaml</code> file.</p>
<h3 id="deploy-helm-chart">Deploy Helm Chart<a class="headerlink" href="#deploy-helm-chart" title="Permanent link">&para;</a></h3>
<details class="note"><summary>Helm V3</summary><p>Please keep in mind, that our current Helm Chart (v1.1.0) is v3 compatible only.</p>
</details>
<p>To deploy the Helm Chart, run:</p>
<pre class="highlight"><code class="language-shell">helm install maesh helm/chart/maesh --set image.pullPolicy=IfNotPresent --set image.tag=latest</code></pre>

<h2 id="kubedns-support">KubeDNS support<a class="headerlink" href="#kubedns-support" title="Permanent link">&para;</a></h2>
<p>Maesh can support KubeDNS:</p>
<pre class="highlight"><code class="language-bash">helm install maesh maesh/maesh --set kubedns=true</code></pre>

<p>With this parameter Maesh will install a CoreDNS as a daemonset.
KubeDNS will be patched with <a href="https://kubernetes.io/docs/tasks/administer-cluster/dns-custom-nameservers/#example-stub-domain">stubDomains</a>.</p>
<h2 id="custom-cluster-domain">Custom cluster domain<a class="headerlink" href="#custom-cluster-domain" title="Permanent link">&para;</a></h2>
<p>If you use a cluster domain other than <code>cluster.local</code> set it by using the <code>clusterDomain</code> parameter:</p>
<pre class="highlight"><code class="language-bash">helm install maesh maesh/maesh --set clusterDomain=my.custom.domain.com</code></pre>

<h2 id="access-control-list">Access Control List<a class="headerlink" href="#access-control-list" title="Permanent link">&para;</a></h2>
<p>By default, Maesh does not restrict traffic between pods and services. However, some scenarios require more control
over the rules for internal communication. The Access Control List mode (ACL) requires a set of rules to explicitly allow 
traffic between different resources.</p>
<p>To enable ACL, install Maesh in ACL mode by setting the <code>acl</code> Helm Chart option to <code>true</code>.</p>
<pre class="highlight"><code class="language-bash">helm install maesh --namespace=maesh maesh/maesh --set acl=true</code></pre>

<p>Maesh supports the <a href="https://smi-spec.io/">SMI specification</a> which defines a set of custom resources
to provide a fine-grained control over instrumentation, routing and access control of east-west communications.</p>
<div class="admonition note crds">
<p class="admonition-title">Note</p>
<p>Helm v3 automatically will install the CRDs in the <code>/crds</code> directory.
If you are re-installing into a cluster with the CRDs already present, Helm may print a warning.
If you do not want to install them, or want to avoid the warning during a re-install,
please use the new <code>--skip-crds</code> flag.
More information can be found on the <a href="https://helm.sh/docs/chart_best_practices/custom_resource_definitions/#method-1-let-helm-do-it-for-you">helm documentation</a>.</p>
</div>
<h2 id="smi-mode-deprecated">SMI Mode (Deprecated)<a class="headerlink" href="#smi-mode-deprecated" title="Permanent link">&para;</a></h2>
<p>Maesh supports the SMI specification which defines a set of custom resources to provide a fine-grained control over instrumentation, routing and access control of east-west communications.</p>
<p>To enable SMI, install maesh in SMI mode by setting the smi.enable helm chart option to true.</p>
<pre class="highlight"><code class="language-bash">helm install maesh --namespace=maesh maesh/maesh --set smi.enable=true`</code></pre>

<p>The smi.enable option makes Maesh process SMI resources.</p>
<p>!!! Note This option is deprecated. Please consider using <code>--acl</code> instead.</p>
<h2 id="platform-recommendations">Platform recommendations<a class="headerlink" href="#platform-recommendations" title="Permanent link">&para;</a></h2>
<p>Maesh works on Kubernetes environments that conforms to the global Kubernetes specification.
That being said, we have had users encounter issues when using variants such as minikube, microk8s,
and other development distributions.</p>
<p>Maesh runs without issue on most public clouds (AWS, GKE, Azure, DigitalOcean, and more).
If you want to run Maesh in development, we would recommend using <a href="https://k3s.io/">k3s</a>, as it is fully conformant.
We use k3s in Maesh's integration tests, so you can be sure that it works properly.</p>
<p>If you encounter issues on variants such as minikube or microk8s, please try and reproduce the issue on k3s.
If you are unable to reproduce, it may be an issue with the distribution behaving differently than official Kubernetes.</p>
<h2 id="verify-your-installation">Verify your installation<a class="headerlink" href="#verify-your-installation" title="Permanent link">&para;</a></h2>
<p>You can check that Maesh has been installed properly by running the following command:</p>
<div class="superfences-tabs">
<input name="__tabs_1" type="radio" id="__tab_1_0" checked="checked" />
<label for="__tab_1_0">Command</label>
<div class="superfences-content"><pre class="highlight"><code class="language-bash">kubectl get all -n maesh</code></pre></div>
<input name="__tabs_1" type="radio" id="__tab_1_1" />
<label for="__tab_1_1">Expected Output</label>
<div class="superfences-content"><pre class="highlight"><code class="language-text">
NAME                                    READY   STATUS    RESTARTS   AGE
pod/maesh-controller-676fb86b89-pj8ph   1/1     Running   0          11s
pod/maesh-mesh-w62z5                    1/1     Running   0          11s
pod/maesh-mesh-zjlpf                    1/1     Running   0          11s

NAME                     TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)    AGE
service/maesh-mesh-api   ClusterIP   100.69.177.254   &lt;none&gt;        8080/TCP   29s

NAME                        DESIRED   CURRENT   READY   UP-TO-DATE   AVAILABLE   NODE SELECTOR   AGE
daemonset.apps/maesh-mesh   2         2         0       2            0           &lt;none&gt;          29s

NAME                               DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
deployment.apps/maesh-controller   1         1         1            0           28s

NAME                                          DESIRED   CURRENT   READY   AGE
replicaset.apps/maesh-controller-676fb86b89   1         1         0       28s</code></pre></div>
</div>
<h2 id="usage">Usage<a class="headerlink" href="#usage" title="Permanent link">&para;</a></h2>
<p>To use Maesh, instead of referencing services via their normal <code>&lt;servicename&gt;.&lt;namespace&gt;</code>, instead use <code>&lt;servicename&gt;.&lt;namespace&gt;.maesh</code>.
This will access the Maesh service mesh, and will allow you to route requests through Maesh.</p>
<p>By default, Maesh is opt-in, meaning you have to use the Maesh service names to access the mesh, so you can have some services running through the mesh, and some services not.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      

<!-- Application footer -->
<footer class="md-footer">

    <!-- Further information -->
    <div class="md-footer-meta md-typeset">
        <div class="md-footer-meta__inner md-grid">

            <!-- Copyright and theme information -->
            <div class="md-footer-copyright">
                
                <div class="md-footer-copyright__highlight">
                    Copyright &copy; 2016-2020 Containous
                </div>
                
                powered by
                <a href="https://www.mkdocs.org" title="MkDocs">MkDocs</a>
                and
                <a href="https://squidfunk.github.io/mkdocs-material/"
                   title="Material for MkDocs">
                    Material for MkDocs</a>
            </div>

            <!-- Social links -->
            
            
            
        </div>
    </div>
</footer>

    </div>
    
      <script src="../assets/javascripts/application.c648116f.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
        <script src="../assets/js/hljs/highlight.pack.js"></script>
      
        <script src="../assets/js/extra.js"></script>
      
        <script src="../theme/js/structor-menu.js"></script>
      
    
  </body>
</html>